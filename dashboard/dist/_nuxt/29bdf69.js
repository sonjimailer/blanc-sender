(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{715:function(t,e,n){"use strict";n.r(e);var r=n(594),o=n(231),c=n(505),l=n(501),f=n(704),d=n(530),h=n(703),m=n(702),v=n(570),A=(n(35),n(48),n(40),n(53),n(42),n(16),n(60),n(65),n(44),n(30));n(92),n(182),n(8),n(18),n(28),n(64),n(561);function N(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var k={data:function(){return{file:[],tab:"Upload File",attachment:[],fileName:"",fileText:"",cmOptions:{tabSize:4,mode:"text/javascript",theme:"base16-dark",lineNumbers:!0,line:!0},radioGroup:"attachment",name:"{{NAME}}, {{EMAIL}}, {{COMPANYNAME}}, {{DOMAIN}}, {{DATE}}, {{DATETOMORROW}}, {{TIME}}, {{RANDOMSTRING1}} - {{RANDOMSTRING7}}, {{BASE64EMAIL}}, {{BASE64(Text Here)}}, {{URLENCODE(Url Here)}}"}},watch:{radioGroup:function(){this.setAttachment(this.radioGroup)}},mounted:function(){this.getAttachment()},methods:{handleSubmitFile:function(t){var e,n=N(this.files);try{for(n.s();!(e=n.n()).done;){var r=e.value;console.log(r)}}catch(t){n.e(t)}finally{n.f()}this.file=t},getAttachment:function(){var t=this;this.$axios.get("/campaign/attachments").then((function(e){var n=e.data.data;if(t.attachment=n,n.find((function(t){return"make"===t.field&&"1"===t.active}))){var r=n.find((function(t){return"make"===t.field&&"1"===t.active}));t.fileText=r&&r.free_text||"",t.fileName=r?r.file_name:"";var o=n.filter((function(t){return"make"===t.field}));t.radioGroup=o[o.length-1].field}else{var c=n.find((function(t){return"1"===t.active})).field;t.radioGroup=c}}))},deleteAttachment:function(t){var e=this;return Object(A.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.delete("/campaign/delete-attachment/".concat(t));case 2:case"end":return n.stop()}}),n)})))()},saveAttachment:function(){var t=this;if(this.attachment.length>0&&this.attachment.find((function(t){return"attachment"===t.field}))){var e=this.attachment.find((function(t){return"attachment"===t.field})).id;this.deleteAttachment(e)}var n=new FormData;n.append("attachment",this.file),n.append("field","attachment"),this.$axios.post("/campaign/upload",n).then((function(){t.$toast.success("data has been added",{position:"top-right",duration:2e3}),t.getAttachment()})).catch((function(e){var n=e.response.data.meta.message;console.log(e.response.data.data),"Data tidak lengkap"===n?t.$toast.error("Please Choose a file",{position:"top-right",duration:2e3}):"Anda sudah memiliki attachment jenis attachment"===n&&t.$toast.error("You already hace attachment",{position:"top-right",duration:2e3})}))},createAttachment:function(){var t=this;if(this.attachment&&this.attachment.find((function(t){return"make"===t.field}))){var e=this.attachment.find((function(t){return"make"===t.field})).id;this.deleteAttachment(e)}var n=new FormData;n.append("free_text",this.fileText),n.append("field","make"),n.append("file_name",this.fileName),this.$axios.post("/campaign/upload",n).then((function(){t.$toast.success("data has been added",{position:"top-right",duration:2e3}),t.getAttachment()})).catch((function(e){var n=e.response.data.meta.message;console.log(e.response.data.data),"Data tidak lengkap"===n?t.$toast.error("Please Choose a file",{position:"top-right",duration:2e3}):("Anda sudah memiliki attachment"===n||"Anda sudah memiliki attachment jenis make"===n)&&t.$toast.error("You already hace attachment",{position:"top-right",duration:2e3})}))},setAttachment:function(t){var e=this;if(this.attachment.length>0&&this.attachment.find((function(e){return e.field===t}))){var n=this.attachment.filter((function(t){return"make"===t.field})),r="make"===t?this.attachment.filter((function(t){return"make"===t.field}))[n.length-1].id:0,o="make"!==t?this.attachment.find((function(e){return e.field===t})).id:r;this.$axios.get("/campaign/activate-attachment/".concat(o)).then((function(){"attachment"===t?(e.$toast.success("Now u use uploaded file as Attachment",{position:"top-right",duration:2e3}),e.getAttachment()):(e.$toast.success("Now u use created file as Attachment",{position:"top-right",duration:2e3}),e.getAttachment())}))}},replaceFunction:function(data){var t=new Date,e=t.setDate(t.getDate()+1),n=this.$dateFns.format(new Date,"dd MMM yyy"),time=this.$dateFns.format(t,"HH:mm"),r=this.$dateFns.format(e,"dd MMM yyy"),body=data;return body=(body=(body=(body=(body=(body=(body=(body=(body=(body=body.replace("{{DATE}}",n)).replace("{{DATETOMORROW}}",r)).replace("{{TIME}}",time)).replace("{{RANDOMSTRING1}}",this.randString())).replace("{{RANDOMSTRING2}}",this.randString())).replace("{{RANDOMSTRING3}}",this.randString())).replace("{{RANDOMSTRING4}}",this.randString())).replace("{{RANDOMSTRING5}}",this.randString())).replace("{{RANDOMSTRING6}}",this.randString())).replace("{{RANDOMSTRING7}}",this.randString())},randString:function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz1234567890",e="",i=0;i<10;i++){var n=Math.floor(61*Math.random());e+=t.substring(n,n+1)}return e}}},x=n(80),component=Object(x.a)(k,(function(){var t=this,e=t._self._c;return e("div",[e(m.a,{model:{value:t.radioGroup,callback:function(e){t.radioGroup=e},expression:"radioGroup"}},[e(c.a,{staticClass:"mt-6 pa-6",attrs:{dark:""}},[e("div",{staticClass:"d-flex"},[e(h.a,{staticClass:"mt-2",attrs:{value:"attachment"}}),t._v(" "),e(l.c,{staticClass:"px-0"},[t._v("Upload Attachment")])],1),t._v(" "),e(c.a,{attrs:{flat:""}},[e(l.b,[e(d.a,{attrs:{light:"",disabled:"make"===t.radioGroup},on:{submit:function(e){return e.preventDefault(),t.saveAttachment()}}},[e(f.a,{ref:"file",attrs:{label:"Upload File"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),t._v(" "),e(o.a,{staticClass:"mt-2",attrs:{disabled:t.file&&t.file.length<1,type:"submit",color:"green"}},[t._v("Save")])],1)],1)],1)],1),t._v(" "),e(c.a,{staticClass:"mt-6 pa-6",attrs:{dark:""}},[e("div",{staticClass:"d-flex"},[e(h.a,{staticClass:"mt-2",attrs:{value:"make"}}),t._v(" "),e(l.c,{staticClass:"px-0"},[t._v("Create Attachment")])],1),t._v(" "),e(c.a,{attrs:{flat:""}},[e(l.b,[e(d.a,{attrs:{disabled:"attachment"===t.radioGroup},on:{submit:function(e){return e.preventDefault(),t.createAttachment.apply(null,arguments)}}},[e(v.a,{attrs:{label:"File name",required:""},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}}),t._v(" "),e("codemirror",{attrs:{options:t.cmOptions},model:{value:t.fileText,callback:function(e){t.fileText=e},expression:"fileText"}}),t._v(" "),e(r.a,{staticClass:"mt-2",staticStyle:{"font-size":"14px"},attrs:{dense:"",type:"info",color:"info"}},[t._v("\n        You can use "+t._s(t.name)+" function inside File name or Content\n      ")]),t._v(" "),e(o.a,{staticClass:"mt-2",attrs:{type:"submit",disabled:t.fileText&&t.fileText<1,color:"green"}},[t._v("Save")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);