(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{591:function(t,e,n){var content=n(694);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("ee1e6a28",content,!0,{sourceMap:!1})},693:function(t,e,n){"use strict";n(591)},694:function(t,e,n){var r=n(22)((function(i){return i[1]}));r.push([t.i,".left-panel{line-height:28px;padding:10px}.terminal{background-color:#000!important;border-radius:5px;color:#0f0!important;font-family:sans-serif;height:70vh!important;overflow-anchor:none;overflow-y:scroll;padding:8px 10px}",""]),r.locals={},t.exports=r},728:function(t,e,n){"use strict";n.r(e);var r=n(231),l=n(505),o=n(533),m=n(531),c=n(532),d=n(57),f=(n(35),n(16),n(18),n(19),n(15),n(20),n(30)),h=n(0),C=(n(92),n(8),n(68),n(182),n(42),n(44),n(48),n(28),n(148),n(64),n(652),n(40),n(17),n(654),n(658),n(666),n(668),n(669),n(670),n(673),n(674),n(675),n(676),n(677),n(678),n(679),n(680),n(682),n(683),n(684),n(685),n(686),n(687),n(688),n(689),n(690),n(691),n(692),n(90),n(67),n(136));function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(h.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var A={name:"emailList",data:function(){return{data:{name:"No Data",smtpConfig:"",totalEmail:0,date:"23 Maret 2023",status:"draft"},isLoading:!1,emailBody:[],email:[],attachment:[],mailConfig:[],smtpRotate:!0,mailConfigCount:0,activeMailConfig:{},threadMailList:[],threadMailCount:0,thread:3,threadLoopCount:0,threadLoopTotal:0,mailSetup:[],encodeData:"",output:null,bodyPreview:"",base64List:[],base64String:[],baseActiveMailConfig:{},asImageWidth:660,letterCenter:0,qrResult:null,qrReady:!1}},computed:M(M({},Object(C.b)(["mailProgress"])),{},{userRole:function(){return this.$auth.user.role},userData:function(){return this.$auth.user},isDisable:function(){return!(this.emailBody&&"No Config"!==this.data.smtpConfig&&""!==this.data.smtpConfig&&this.data.totalEmail>0)}}),watch:{email:function(){if(this.email.length>0&&this.mailSetup){var data=this.email.length/parseInt(this.mailSetup.thread);this.threadLoopTotal=Math.floor(data)}},mailSetup:function(){if(this.email.length>0&&this.mailSetup){var data=this.email.length/parseInt(this.mailSetup.thread);this.threadLoopTotal=Math.floor(data)}},mailProgress:function(){this.mailProgress.length===this.data.totalEmail&&(this.isLoading=!1)}},mounted:function(){this.totalEmail(),this.getCampaign(),this.getAttachment(),this.getMailConfig()},methods:{getMailConfig:function(){var t=this;this.$axios.get("/mail-set-up").then((function(e){var n=e.data.data;t.mailSetup=n}))},scroll:function(){this.$refs.bottom.scrollIntoView(!1)},loadingSendmail:function(){this.isLoading=!0,this.sendMail()},sleep:function(t){return new Promise((function(e){return setTimeout(e,t)}))},sendMail:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var n,r,i,l,o,m,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mailConfigCount=0,t.$store.commit("reset_progress"),t.threadMailList=[],t.threadLoopCount=0,n=t.attachment.find((function(t){return"1"===t.active})),"1"!==t.emailBody.has_file){e.next=25;break}if("make"!==n.field){e.next=16;break}r=regeneratorRuntime.mark((function e(i){var r,l,o,m,c,d,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.randCid(),e.next=3,t.replaceFunction(i,"body");case 3:return l=e.sent,e.next=6,t.replaceFunction(i,"subject");case 6:return o=e.sent,e.next=9,t.replaceFunction(i,"template");case 9:return m=e.sent,e.next=12,t.replaceFunctionAtt(i,n.free_text);case 12:return c=e.sent,e.next=15,t.replaceFunctionAtt(i,n.file_name);case 15:if(d=e.sent,f="1"===t.mailSetup.smtp_rotate?t.replaceFunctionSmtp(i,!0):t.replaceFunctionSmtp(i,!1),!t.isLoading){e.next=25;break}return t.bodyPreview=l,e.next=21,t.toCanvas();case 21:h=[{filename:d,content:c}],"1"===t.emailBody.to_image&&"0"===t.emailBody.base64&&(h=[{filename:d,content:c},{filename:r.slice(0,5)+".png",path:"./images/"+r.slice(0,5)+".png",contentDisposition:"inline",cid:r}]),t.$axios({url:"/kasdhfKKksjhdIUOWUTIIysjjh9s0",baseURL:"http://".concat(t.userData.ip,":5000"),method:"post",data:{to:t.email[i],subject:o,text:"1"===t.emailBody.to_image?t.output:l,template:m,attachment:h,randomCID:r,isProxy:t.mailSetup.is_proxy,proxy:"1"===t.mailSetup.is_proxy?t.mailSetup.proxy:null,toImage:"1"===t.emailBody.to_image,imageStyle:{height:t.emailBody.height?t.emailBody.height:"700",width:t.emailBody.width?t.emailBody.width:"800"},imageMode:!(!t.emailBody.base64||"1"!==t.emailBody.base64),smtp:{active:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].active:t.activeMailConfig.active,anonymous_name:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].anonymous_name:t.activeMailConfig.anonymous_name,created_at:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].created_at:t.activeMailConfig.created_at,encryption:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].encryption:t.activeMailConfig.encryption,from_email:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].from_email:t.activeMailConfig.from_email,from_name:f,host:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].host:t.activeMailConfig.host,id:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].id:t.activeMailConfig.id,name:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].name:t.activeMailConfig.name,password:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].password:t.activeMailConfig.password,port:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].port:t.activeMailConfig.port,updated_at:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].updated_at:t.activeMailConfig.updated_at,user_id:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].user_id:t.activeMailConfig.user_id,username:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].username:t.activeMailConfig.username}}}).then((function(e){var n={email:t.email[i],status:e.data.status,msg:e.data.msg?e.data.msg:""};"1"===t.mailSetup.multi_thread?t.threadLoopCount<t.threadLoopTotal?t.myLoop(n):t.loopEmailLeft(i,n):t.$store.commit("push_progress",n),t.scroll()})).catch((function(e){t.$toast.error("Internal Server Error, make sure your server are ready to use",{position:"top-right",duration:2e3})})),"1"===t.mailSetup.smtp_rotate&&(t.mailConfigCount<t.mailConfig.length-1?t.mailConfigCount=t.mailConfigCount+1:t.mailConfigCount=0);case 25:return e.next=27,t.sleep(1e3*parseInt(t.mailSetup.sleep_time>0?t.mailSetup.sleep_time-0:t.mailSetup.sleep_time));case 27:case"end":return e.stop()}}),e)})),i=0;case 9:if(!(i<t.email.length)){e.next=14;break}return e.delegateYield(r(i),"t0",11);case 11:i++,e.next=9;break;case 14:e.next=23;break;case 16:l=regeneratorRuntime.mark((function e(r){var l,o,m,c,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.randCid(),e.next=3,t.replaceFunction(r,"body");case 3:return o=e.sent,e.next=6,t.replaceFunction(r,"subject");case 6:return m=e.sent,e.next=9,t.replaceFunction(r,"template");case 9:if(c=e.sent,d="1"===t.mailSetup.smtp_rotate?t.replaceFunctionSmtp(r,!0):t.replaceFunctionSmtp(r,!1),!t.isLoading){e.next=18;break}return t.bodyPreview=o,e.next=15,t.toCanvas();case 15:f=[{filename:n.attachment,path:n.path}],"1"===t.emailBody.to_image&&"0"===t.emailBody.base64&&(f=[{filename:n.attachment,path:n.path},{filename:l.slice(0,5)+".png",path:"./images/"+l.slice(0,5)+".png",contentDisposition:"inline",cid:l}]),t.$axios({url:"/kasdhfKKksjhdIUOWUTIIysjjh9s0",baseURL:"http://".concat(t.userData.ip,":5000"),method:"post",data:{to:t.email[r],subject:m,text:"1"===t.emailBody.to_image?t.output:o,template:c,toImage:"1"===t.emailBody.to_image,attachment:f,randomCID:l,isProxy:t.mailSetup.is_proxy,proxy:"1"===t.mailSetup.is_proxy?t.mailSetup.proxy:null,imageStyle:{height:t.emailBody.height?t.emailBody.height:"700",width:t.emailBody.width?t.emailBody.width:"800"},imageMode:!(!t.emailBody.base64||"1"!==t.emailBody.base64),smtp:{active:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].active:t.activeMailConfig.active,anonymous_name:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].anonymous_name:t.activeMailConfig.anonymous_name,created_at:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].created_at:t.activeMailConfig.created_at,encryption:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].encryption:t.activeMailConfig.encryption,from_email:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].from_email:t.activeMailConfig.from_email,from_name:d,host:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].host:t.activeMailConfig.host,id:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].id:t.activeMailConfig.id,name:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].name:t.activeMailConfig.name,password:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].password:t.activeMailConfig.password,port:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].port:t.activeMailConfig.port,updated_at:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].updated_at:t.activeMailConfig.updated_at,user_id:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].user_id:t.activeMailConfig.user_id,username:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].username:t.activeMailConfig.username}}}).then((function(e){var n={email:t.email[r],status:e.data.status,msg:e.data.msg?e.data.msg:""};"1"===t.mailSetup.multi_thread?t.threadLoopCount<=t.threadLoopTotal?t.myLoop(n):t.loopEmailLeft(r,n):t.$store.commit("push_progress",n),t.scroll()})).catch((function(e){t.$toast.error("Internal Server Error, make sure your server are ready to use",{position:"top-right",duration:2e3})}));case 18:return"0"!==t.mailSetup.smtp_rotate&&(t.mailConfigCount+1===t.mailConfig.length?t.mailConfigCount=0:t.mailConfigCount=t.mailConfigCount+1),e.next=21,t.sleep(1e3*parseInt(t.mailSetup.sleep_time>0?t.mailSetup.sleep_time-0:t.mailSetup.sleep_time));case 21:case"end":return e.stop()}}),e)})),o=0;case 18:if(!(o<t.email.length)){e.next=23;break}return e.delegateYield(l(o),"t1",20);case 20:o++,e.next=18;break;case 23:e.next=32;break;case 25:m=regeneratorRuntime.mark((function e(n){var r,l,o,m,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.randCid(),e.next=3,t.replaceFunction(n,"body");case 3:return l=e.sent,e.next=6,t.replaceFunction(n,"subject");case 6:return o=e.sent,e.next=9,t.replaceFunction(n,"template");case 9:if(m=e.sent,c="1"===t.mailSetup.smtp_rotate?t.replaceFunctionSmtp(n,!0):t.replaceFunctionSmtp(n,!1),!t.isLoading){e.next=18;break}return t.bodyPreview=l,e.next=15,t.toCanvas();case 15:d=[],"1"===t.emailBody.to_image&&"0"===t.emailBody.base64&&(d=[{filename:r.slice(0,5)+".png",path:"./images/"+r.slice(0,5)+".png",contentDisposition:"inline",cid:r}]),t.$axios({url:"/kasdhfKKksjhdIUOWUTIIysjjh9s0",baseURL:"http://".concat(t.userData.ip,":5000"),method:"post",data:{to:t.email[n],subject:o,text:"1"===t.emailBody.to_image?t.output:l,template:m,attachment:d,toImage:"1"===t.emailBody.to_image,randomCID:r,isProxy:t.mailSetup.is_proxy,proxy:"1"===t.mailSetup.is_proxy?t.mailSetup.proxy:null,imageStyle:{height:t.emailBody.height?t.emailBody.height:"700",width:t.emailBody.width?t.emailBody.width:"800"},imageMode:!(!t.emailBody.base64||"1"!==t.emailBody.base64),smtp:{active:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].active:t.activeMailConfig.active,anonymous_name:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].anonymous_name:t.activeMailConfig.anonymous_name,created_at:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].created_at:t.activeMailConfig.created_at,encryption:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].encryption:t.activeMailConfig.encryption,from_email:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].from_email:t.activeMailConfig.from_email,from_name:c,host:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].host:t.activeMailConfig.host,id:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].id:t.activeMailConfig.id,name:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].name:t.activeMailConfig.name,password:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].password:t.activeMailConfig.password,port:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].port:t.activeMailConfig.port,updated_at:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].updated_at:t.activeMailConfig.updated_at,user_id:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].user_id:t.activeMailConfig.user_id,username:"1"===t.mailSetup.smtp_rotate?t.mailConfig[t.mailConfigCount].username:t.activeMailConfig.username}}}).then((function(e){var r={email:t.email[n],status:e.data.status,msg:e.data.msg?e.data.msg:""};"1"===t.mailSetup.multi_thread?t.threadLoopCount<=t.threadLoopTotal?t.myLoop(r):t.loopEmailLeft(n,r):t.$store.commit("push_progress",r),t.scroll()})).catch((function(e){t.$toast.error("Internal Server Error, make sure your server are ready to use",{position:"top-right",duration:2e3})}));case 18:return"0"!==t.mailSetup.smtp_rotate&&(t.mailConfigCount+1===t.mailConfig.length?t.mailConfigCount=0:t.mailConfigCount=t.mailConfigCount+1),e.next=21,t.sleep(1e3*parseInt(t.mailSetup.sleep_time>0?t.mailSetup.sleep_time-0:t.mailSetup.sleep_time));case 21:case"end":return e.stop()}}),e)})),c=0;case 27:if(!(c<t.email.length)){e.next=32;break}return e.delegateYield(m(c),"t2",29);case 29:c++,e.next=27;break;case 32:case"end":return e.stop()}}),e)})))()},replaceFunction:function(i,t){var e=this;return Object(f.a)(regeneratorRuntime.mark((function n(){var r,l,o,m,c,d,time,f,body,h,C,S,M,A,v,_,y,R,O,N,x,D,I,T,w;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.email[i].substring(e.email[i].indexOf("@")+1),l=r.substring(0,r.indexOf(".")),o=r.substring(0,r.length),m=new Date,c=m.setDate(m.getDate()+1),d=e.$dateFns.format(new Date,"dd MMM yyy"),time=e.$dateFns.format(m,"HH:mm"),f=e.$dateFns.format(c,"dd MMM yyy"),body=e.emailBody[t],h=/{{BASE64\((.*?)\)\}}/g,C=body.match(h),S=/{{URLENCODE\((.*?)\)\}}/g,M=body.match(S),A=/{{URLQR\((.*?)\)\}}/g,v=body.match(A),M)for(_=M,y=0;y<_.length;y++)body=body.replaceAll(_[y].toString(),e.convertUrl(_[y].toString(),i));if(!v){n.next=32;break}R=v,(O=e.$refs.qrcode).innerHTML="",N=0;case 21:if(!(N<v.length)){n.next=32;break}return x=e.convertUrlQr(R[N].toString(),i),new QRCode(O,{text:x,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),n.next=26,e.qrToCanvas();case 26:D=n.sent,I='<img style="width:100%;border: 10px solid #ffffff;" src="'+D+'" alt=""/>',body=body.replaceAll(R[N].toString(),I);case 29:N++,n.next=21;break;case 32:if(C)for(T=C,w=0;w<T.length;w++)body=body.replaceAll(T[w].toString(),e.convertBase64(T[w].toString(),i));return body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=body.replaceAll("{{NAME}}",e.capt(e.email[i].substring(0,e.email[i].indexOf("@"))))).replaceAll("{{COMPANYNAME}}",e.capt(l))).replaceAll("{{DOMAIN}}",o)).replaceAll("{{DATE}}",d)).replaceAll("{{DATETOMORROW}}",f)).replaceAll("{{TIME}}",time)).replaceAll("{{RANDOMSTRING1}}",e.randString(1))).replaceAll("{{RANDOMSTRING2}}",e.randString(2))).replaceAll("{{RANDOMSTRING3}}",e.randString(3))).replaceAll("{{RANDOMSTRING4}}",e.randString(4))).replaceAll("{{RANDOMSTRING5}}",e.randString(5))).replaceAll("{{RANDOMSTRING6}}",e.randString(6))).replaceAll("{{RANDOMSTRING7}}",e.randString(7))).replaceAll("{{EMAIL}}",e.email[i])).replaceAll("{{BASE64EMAIL}}",btoa(e.email[i])),n.abrupt("return",body);case 49:case"end":return n.stop()}}),n)})))()},replaceFunctionSmtp:function(i,t){var e=this.email[i].substring(this.email[i].indexOf("@")+1),n=e.substring(0,e.indexOf(".")),r=e.substring(0,e.length),l=new Date,o=l.setDate(l.getDate()+1),m=this.$dateFns.format(new Date,"dd MMM yyy"),time=this.$dateFns.format(l,"HH:mm"),c=this.$dateFns.format(o,"dd MMM yyy"),body=t?this.mailConfig[this.mailConfigCount].from_name:this.activeMailConfig.from_name,d=body.match(/{{BASE64\((.*?)\)\}}/g),f=body.match(/{{URLENCODE\((.*?)\)\}}/g);if(f)for(var h=f,C=0;C<f.length;C++)body=body.replaceAll(h[C].toString(),this.convertUrl(h[C].toString(),i));if(d)for(var S=0;S<d.length;S++)body=body.replaceAll(d[S].toString(),this.convertBase64(d[S].toString(),i));return body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=body.replaceAll("{{NAME}}",this.capt(this.email[i].substring(0,this.email[i].indexOf("@"))))).replaceAll("{{COMPANYNAME}}",this.capt(n))).replaceAll("{{DOMAIN}}",r)).replaceAll("{{DATE}}",m)).replaceAll("{{DATETOMORROW}}",c)).replaceAll("{{TIME}}",time)).replaceAll("{{RANDOMSTRING1}}",this.randString(1))).replaceAll("{{RANDOMSTRING2}}",this.randString(2))).replaceAll("{{RANDOMSTRING3}}",this.randString(3))).replaceAll("{{RANDOMSTRING4}}",this.randString(4))).replaceAll("{{RANDOMSTRING5}}",this.randString(5))).replaceAll("{{RANDOMSTRING6}}",this.randString(6))).replaceAll("{{RANDOMSTRING7}}",this.randString(7))).replaceAll("{{EMAIL}}",this.email[i])).replaceAll("{{BASE64EMAIL}}",btoa(this.email[i]))},convertUrl:function(t,i){var e=this.email[i].substring(this.email[i].indexOf("@")+1),n=e.substring(0,e.indexOf(".")),r=e.substring(0,e.length),l=new Date,o=l.setDate(l.getDate()+1),m=this.$dateFns.format(new Date,"dd MMM yyy"),time=this.$dateFns.format(l,"HH:mm"),c=this.$dateFns.format(o,"dd MMM yyy");if(t){for(var d=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replaceAll("{{NAME}}",this.capt(this.email[i].substring(0,this.email[i].indexOf("@"))))).replaceAll("{{COMPANYNAME}}",this.capt(n))).replaceAll("{{DOMAIN}}",r)).replaceAll("{{DATE}}",m)).replaceAll("{{DATETOMORROW}}",c)).replaceAll("{{TIME}}",time)).replaceAll("{{RANDOMSTRING1}}",this.randString(1))).replaceAll("{{RANDOMSTRING2}}",this.randString(2))).replaceAll("{{RANDOMSTRING3}}",this.randString(3))).replaceAll("{{RANDOMSTRING4}}",this.randString(4))).replaceAll("{{RANDOMSTRING5}}",this.randString(5))).replaceAll("{{RANDOMSTRING6}}",this.randString(6))).replaceAll("{{RANDOMSTRING7}}",this.randString(7))).replaceAll("{{EMAIL}}",this.email[i])).replaceAll("{{BASE64EMAIL}}",btoa(this.email[i]))).match(/([^({{URLENCODE\())])(.*)[^(\)\}})]/g).toString(),f="",h=0;h<d.length;h++){f+="%"+d.charCodeAt(h).toString(16)}return f}},convertUrlQr:function(t,i){this.qrResult=null;var e=this.email[i].substring(this.email[i].indexOf("@")+1),n=e.substring(0,e.indexOf(".")),r=e.substring(0,e.length),l=new Date,o=l.setDate(l.getDate()+1),m=this.$dateFns.format(new Date,"dd MMM yyy"),time=this.$dateFns.format(l,"HH:mm"),c=this.$dateFns.format(o,"dd MMM yyy");if(t){return(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replaceAll("{{NAME}}",this.capt(this.email[i].substring(0,this.email[i].indexOf("@"))))).replaceAll("{{COMPANYNAME}}",this.capt(n))).replaceAll("{{DOMAIN}}",r)).replaceAll("{{DATE}}",m)).replaceAll("{{DATETOMORROW}}",c)).replaceAll("{{TIME}}",time)).replaceAll("{{RANDOMSTRING1}}",this.randString(1))).replaceAll("{{RANDOMSTRING2}}",this.randString(2))).replaceAll("{{RANDOMSTRING3}}",this.randString(3))).replaceAll("{{RANDOMSTRING4}}",this.randString(4))).replaceAll("{{RANDOMSTRING5}}",this.randString(5))).replaceAll("{{RANDOMSTRING6}}",this.randString(6))).replaceAll("{{RANDOMSTRING7}}",this.randString(7))).replaceAll("{{EMAIL}}",this.email[i])).replaceAll("{{BASE64EMAIL}}",btoa(this.email[i]))).match(/([^({{URLQR\())])(.*)[^(\)\}})]/g).toString()}},convertBase64:function(t,i){var e=this.email[i].substring(this.email[i].indexOf("@")+1),n=e.substring(0,e.indexOf(".")),r=e.substring(0,e.length),l=new Date,o=l.setDate(l.getDate()+1),m=this.$dateFns.format(new Date,"dd MMM yyy"),time=this.$dateFns.format(l,"HH:mm"),c=this.$dateFns.format(o,"dd MMM yyy");if(t){var d=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replaceAll("{{NAME}}",this.capt(this.email[i].substring(0,this.email[i].indexOf("@"))))).replaceAll("{{COMPANYNAME}}",this.capt(n))).replaceAll("{{DOMAIN}}",r)).replaceAll("{{DATE}}",m)).replaceAll("{{DATETOMORROW}}",c)).replaceAll("{{TIME}}",time)).replaceAll("{{RANDOMSTRING1}}",this.randString(1))).replaceAll("{{RANDOMSTRING2}}",this.randString(2))).replaceAll("{{RANDOMSTRING3}}",this.randString(3))).replaceAll("{{RANDOMSTRING4}}",this.randString(4))).replaceAll("{{RANDOMSTRING5}}",this.randString(5))).replaceAll("{{RANDOMSTRING6}}",this.randString(6))).replaceAll("{{RANDOMSTRING7}}",this.randString(7))).replaceAll("{{EMAIL}}",this.email[i])).replaceAll("{{BASE64EMAIL}}",btoa(this.email[i]))).match(/([^({{BASE64\())])(.*)[^(\)\}})]/g);return this.base64List.push(btoa(d)),this.base64String.push(d[0]),btoa(d)}},capt:function(t){return t[0].toUpperCase()+t.substring(1)},randString:function(t){for(var e="0123456789",n=t,r="",i=0;i<n;i++){var l=Math.floor(10*Math.random());r+=e.substring(l,l+1)}return r},replaceFunctionAtt:function(i,data){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var n,r,l,o,m,c,time,d,body,f,h,C,S,M,A,v,_,y,R,O,N,x,D,I;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email[i].substring(t.email[i].indexOf("@")+1),r=n.substring(0,n.indexOf(".")),l=n.substring(0,n.length),o=new Date,m=o.setDate(o.getDate()+1),c=t.$dateFns.format(new Date,"dd MMM yyy"),time=t.$dateFns.format(o,"HH:mm"),d=t.$dateFns.format(m,"dd MMM yyy"),f=/{{BASE64\((.*?)\)\}}/g,h=(body=data).match(f),C=/{{URLENCODE\((.*?)\)\}}/g,S=body.match(C),M=/{{URLQR\((.*?)\)\}}/g,A=body.match(M),S)for(v=S,_=0;_<S.length;_++)body=body.replaceAll(v[_].toString(),t.convertUrl(v[_].toString(),i));if(!A){e.next=32;break}y=A,(R=t.$refs.qrcode).innerHTML="",O=0;case 21:if(!(O<A.length)){e.next=32;break}return N=t.convertUrlQr(y[O].toString(),i),new QRCode(R,{text:N,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),e.next=26,t.qrToCanvas();case 26:x=e.sent,D='<img style="width:100%;border: 10px solid #ffffff;" src="'+x+'" alt=""/>',body=body.replaceAll(y[O].toString(),D);case 29:O++,e.next=21;break;case 32:if(h)for(I=0;I<h.length;I++)body=body.replaceAll(h[I].toString(),t.convertBase64(h[I].toString(),i));return body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=(body=body.replaceAll("{{NAME}}",t.capt(t.email[i].substring(0,t.email[i].indexOf("@"))))).replaceAll("{{COMPANYNAME}}",t.capt(r))).replaceAll("{{DOMAIN}}",l)).replaceAll("{{DATE}}",c)).replaceAll("{{DATETOMORROW}}",d)).replaceAll("{{TIME}}",time)).replaceAll("{{RANDOMSTRING1}}",t.randString(1))).replaceAll("{{RANDOMSTRING2}}",t.randString(2))).replaceAll("{{RANDOMSTRING3}}",t.randString(3))).replaceAll("{{RANDOMSTRING4}}",t.randString(4))).replaceAll("{{RANDOMSTRING5}}",t.randString(5))).replaceAll("{{RANDOMSTRING6}}",t.randString(6))).replaceAll("{{RANDOMSTRING7}}",t.randString(7))).replaceAll("{{EMAIL}}",t.email[i])).replaceAll("{{BASE64EMAIL}}",btoa(t.email[i])),e.abrupt("return",body);case 49:case"end":return e.stop()}}),e)})))()},getCampaign:function(){var t=this;this.$axios.get("/campaign").then((function(e){var n=e.data.data;t.emailBody=e.data.data,t.asImageWidth=e.data.data.width,t.letterCenter=e.data.data.height,t.getConfig(),t.data.name=n.subject,t.data.totalEmail=n.to.split(",").length,t.data.date=n.created_at}))},getConfig:function(){var t=this;this.$axios.get("/mail-config").then((function(e){if(e.data.data.length>0){var n=e.data.data;t.mailConfig=n,t.activeMailConfig=n.find((function(t){return"1"===t.active})),t.baseActiveMailConfig=n.find((function(t){return"1"===t.active}));var r=n.find((function(t){return"1"===t.active})).host;t.data.smtpConfig=r}else t.data.smtpConfig="No Config"}))},totalEmail:function(){var t=this;this.$axios.get("/mailing-list").then((function(e){var n=e.data.data.email.split(",");n?(t.email=n,t.data.totalEmail=n.length):t.data.totalEmail=0}))},getAttachment:function(){var t=this;this.$axios.get("/campaign/attachments").then((function(e){t.attachment=e.data.data}))},commitMessage:function(data){this.$store.commit("push_progress",data),this.threadMailList=[],this.threadMailCount=0},myLoop:function(data){var t=this;this.threadMailCount=this.threadMailCount+1,this.threadMailList.push(data);var e=JSON.parse(JSON.stringify(this.threadMailList));this.threadMailCount===parseInt(this.mailSetup.thread)&&(this.threadLoopCount=this.threadLoopCount+1,setTimeout((function(){t.commitMessage(e)}),10),this.threadMailCount=0,this.threadMailList=[])},loopEmailLeft:function(i,data){var t=this,e=JSON.parse(JSON.stringify(data));setTimeout((function(){t.commitMessage(e)}),10)},toCanvas:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$refs.letter,r={type:"dataURL",useCORS:!0,logging:!1},e.next=4,t.$html2canvas(n,r);case 4:t.output=e.sent;case 5:case"end":return e.stop()}}),e)})))()},qrToCanvas:function(){var t=this.$refs.qrcode;return this.$html2canvas(t,{type:"dataURL",useCORS:!0,logging:!1})},randCid:function(){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",e="0123456789",n="",r="",i=0;i<20;i++){var l=Math.floor(62*Math.random());n+=t.substring(l,l+1)}for(var o=0;o<10;o++){var m=Math.floor(10*Math.random());r+=e.substring(m,m+1)}return n+"."+r},replaceImageWithBase64:function(body){body.match(/(<img([^>]+)>)/gi)[0].match(/src="(.*?)"/g)[0].match(/([^(src=")])(.*)[^(")]/g)[0].toString()}}},v=(n(693),n(80)),component=Object(v.a)(A,(function(){var t=this,e=t._self._c;return e("div",["Admin"!==t.userRole?e(m.a,[e("div",{staticClass:"page-title"},[t._v("Send Email")]),t._v(" "),e(c.a,[e(o.a,{attrs:{cols:"5"}},[e(l.a,{staticClass:"left-panel"},[e("table",[e("tr",[e("td",[t._v("Name")]),t._v(" "),e("td",{staticStyle:{width:"16px"}},[t._v(":")]),t._v(" "),e("td",[t._v(t._s(t.data.name))])]),t._v(" "),e("tr",[e("td",[t._v("SMTP Config")]),t._v(" "),e("td",[t._v(":")]),t._v(" "),e("td",[t._v(t._s(t.data.smtpConfig))])]),t._v(" "),e("tr",[e("td",[t._v("Total Email")]),t._v(" "),e("td",[t._v(":")]),t._v(" "),e("td",[t._v(t._s(t.data.totalEmail)+" "+t._s(t.encodeData))])])]),t._v(" "),e(r.a,{staticClass:"mt-4",attrs:{disabled:t.isLoading,color:"success",loading:t.isLoading},on:{click:t.loadingSendmail}},[t._v("Start")]),t._v(" "),e(r.a,{staticClass:"mt-4 ml-2",attrs:{color:"error",disabled:!t.isLoading},on:{click:function(e){t.isLoading=!1}}},[t._v("Stop")])],1),t._v(" "),e(d.a,{staticClass:"mt-5",staticStyle:{"min-height":"200px","background-color":"white"}},[e("div",{staticClass:"page-title ml-2",staticStyle:{color:"black"}},[t._v("QR Preview")]),t._v(" "),e("div",{ref:"qrcode",staticStyle:{width:"128px",margin:"auto"},attrs:{id:"qrcode"}})])],1),t._v(" "),e(o.a,[e("div",{ref:"terminal",staticClass:"terminal"},[t._v("\n          Sonji Mailer [Version1.0.0] "),e("br"),t._v("\n          Email Sent Progress\n          "),e("br"),t._v(" "),e("br"),t._v(" "),t._l(t.mailProgress,(function(n,i){return e("p",[t._v("\n            "+t._s(i+1)+". > email: "+t._s(n.email)+" status: "+t._s(n.status)+"\n            "),e("span",{staticStyle:{color:"red"}})])})),t._v(" "),e("p",{ref:"bottom",staticStyle:{height:"30px"}})],2)])],1),t._v(" "),e(d.a,{staticClass:"mt-4 pa-2",attrs:{color:"white"}},[e("div",{staticClass:"page-title",staticStyle:{color:"black"}},[t._v("Letter Preview")]),t._v(" "),e("div",{staticClass:"d-flex",class:"1"===t.letterCenter?"justify-center":"",staticStyle:{width:"100%"}},[e("div",{ref:"letter",style:"width:"+t.asImageWidth+"px;color: black;",domProps:{innerHTML:t._s(t.bodyPreview)}})])])],1):e("div",{staticClass:"mt-2 ml-2"},[e("h2",[t._v("Welcome "+t._s(t.userRole))])])],1)}),[],!1,null,null,null);e.default=component.exports}}]);