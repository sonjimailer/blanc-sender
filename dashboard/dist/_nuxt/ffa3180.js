(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{720:function(t,e,n){"use strict";n.r(e);var l=n(594),o=n(231),c=n(505),r=n(501),d=n(533),m=n(531),h=n(551),f=n(530),v=n(213),D=n(532),_=n(496),x=(n(28),n(64),n(8),n(40),n(148),n(561),{name:"emailList",data:function(){return{headers:[{text:"SMTP Config",value:"smtpConfig"},{text:"Total Email",value:"totalEmail"},{text:"Date",value:"date"},{text:"status",value:"status"}],email:"",emailBatch:"",isLoading:!1,confirmDelete:!1,singgleConfirmDelete:!1,data:null,emailRules:[function(t){return/.+@.+/.test(t)||"E-mail must be valid"}],inputType:!0,editDialog:!1,editedEmail:"",selectedData:null,cmOptions:{tabSize:4,mode:"text/javascript",theme:"base16-dark",lineNumbers:!0,line:!0}}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.isLoading=!0,this.$axios.get("/mailing-list").then((function(e){t.data=null;var n=e.data.data;t.data=n,t.emailBatch=n.email.replace(/,/g,"\n"),t.isLoading=!1}))},saveEmail:function(){var t=this;this.isloading=!0;var e=this.emailBatch.split("\n"),n=new FormData;if(n.append("email",e.toString()),n.append("user_id",this.$auth.user.id),null===this.data)this.$axios.post("/mailing-list",n).then((function(){t.$toast.success("data has been added",{position:"top-right",duration:2e3}),t.fetchData(),t.$refs.form.reset(),t.isloading=!1}));else{var l=new FormData;l.append("user_id",this.$auth.user.id),l.append("email",e.toString()),this.$axios.post("/mailing-list/edit",l).then((function(){t.fetchData()})),this.$toast.success("data has been updated",{position:"top-right",duration:2e3})}this.isloading=!1},emailCheck:function(t){return!!t.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},editToggle:function(t){this.selectedData=t,this.editedEmail=t.email,this.editDialog=!0},edit:function(){var t=this;this.$axios.post("/mailing-list/".concat(this.selectedData.id),{email:this.editedEmail}).then((function(){t.$toast.success("".concat(t.editedEmail," has been Updated"),{position:"top-right",duration:2e3}),t.selectedData=null,t.editDialog=!1,t.fetchData()}))},deleteToggle:function(t){this.selectedData=t,this.singgleConfirmDelete=!0},deleteData:function(t){var e=this;"all"===t?this.$axios.delete("/mailing-list").then((function(){e.fetchData(),e.confirmDelete=!1})):this.$axios.delete("/mailing-list/".concat(this.selectedData.id)).then((function(){e.$toast.success("".concat(e.selectedData.email," has been deleted"),{position:"top-right",duration:2e3}),e.singgleConfirmDelete=!1,e.fetchData()}))}}}),C=n(80),component=Object(C.a)(x,(function(){var t=this,e=t._self._c;return e(m.a,{attrs:{fluid:""}},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"page-title"},[t._v("List")]),t._v(" "),e(_.a),t._v(" "),e(o.a,{attrs:{color:"error",small:""},on:{click:function(e){t.confirmDelete=!t.confirmDelete}}},[e(v.a,[t._v("mdi-delete")]),t._v(" DELETE ALL")],1)],1),t._v(" "),e(D.a,[e(d.a,[e(c.a,[e(r.c,[t._v(" Add Email Address ")]),t._v(" "),e(l.a,{staticStyle:{"font-size":"14px",margin:"0px 16px"},attrs:{dense:"",type:"info",color:"info"}},[t._v("\n        Please insert 1 email address each line\n      ")]),t._v(" "),e(f.a,{ref:"form",staticClass:"pa-10",on:{submit:function(e){return e.preventDefault(),t.saveEmail.apply(null,arguments)}}},[e("codemirror",{attrs:{options:t.cmOptions},model:{value:t.emailBatch,callback:function(e){t.emailBatch=e},expression:"emailBatch"}}),t._v(" "),e(o.a,{staticClass:"mt-2",attrs:{type:"submit",color:"green"}},[t._v("Save")])],1)],1)],1)],1),t._v(" "),e(h.a,{attrs:{"max-width":"290"},model:{value:t.confirmDelete,callback:function(e){t.confirmDelete=e},expression:"confirmDelete"}},[e(c.a,[e(r.c,{staticClass:"text-h6"},[t._v(" Delete Confirmation")]),t._v(" "),e(r.b,[t._v(" Are you sure to delete all email address? ")]),t._v(" "),e(r.a,[e(_.a),t._v(" "),e(o.a,{attrs:{color:"red",text:""},on:{click:function(e){t.confirmDelete=!1}}},[t._v("\n          Cancel\n        ")]),t._v(" "),e(o.a,{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.deleteData("all")}}},[t._v("\n          Yes\n        ")])],1)],1)],1),t._v(" "),e(h.a,{attrs:{"max-width":"290"},model:{value:t.singgleConfirmDelete,callback:function(e){t.singgleConfirmDelete=e},expression:"singgleConfirmDelete"}},[e(c.a,[e(r.c,{staticClass:"text-h6"},[t._v(" Delete Confirmation")]),t._v(" "),e(r.b,[t._v(" Are you sure to delete this email address? ")]),t._v(" "),e(r.a,[e(_.a),t._v(" "),e(o.a,{attrs:{color:"red",text:""},on:{click:function(e){t.singgleConfirmDelete=!1}}},[t._v("\n          Cancel\n        ")]),t._v(" "),e(o.a,{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.deleteData("single")}}},[t._v("\n          Yes\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);